(function(e){"use strict";var t=e.HTMLCanvasElement&&e.HTMLCanvasElement.prototype,a=e.Blob&&function(){try{return Boolean(new Blob)}catch(e){return false}}(),n=a&&e.Uint8Array&&function(){try{return new Blob([new Uint8Array(100)]).size===100}catch(e){return false}}(),i=e.BlobBuilder||e.WebKitBlobBuilder||e.MozBlobBuilder||e.MSBlobBuilder,s=(a||i)&&e.atob&&e.ArrayBuffer&&e.Uint8Array&&function(e){var t,s,r,o,l,f;if(e.split(",")[0].indexOf("base64")>=0){t=atob(e.split(",")[1])}else{t=decodeURIComponent(e.split(",")[1])}s=new ArrayBuffer(t.length);r=new Uint8Array(s);for(o=0;o<t.length;o+=1){r[o]=t.charCodeAt(o)}l=e.split(",")[0].split(":")[1].split(";")[0];if(a){return new Blob([n?r:s],{type:l})}f=new i;f.append(s);return f.getBlob(l)};if(e.HTMLCanvasElement&&!t.toBlob){if(t.mozGetAsFile){t.toBlob=function(e,a,n){if(n&&t.toDataURL&&s){e(s(this.toDataURL(a,n)))}else{e(this.mozGetAsFile("blob",a))}}}else if(t.toDataURL&&s){t.toBlob=function(e,t,a){e(s(this.toDataURL(t,a)))}}}if(typeof define==="function"&&define.amd){define(function(){return s})}else{e.dataURLtoBlob=s}})(this);(function(e,t){var a=e.G=typeof exports=="undefined"?{}:exports;a.version="0.0.8";var n=decodeURIComponent,i=encodeURIComponent,s="http://www.w3.org/2000/xmlns/",r="http://www.w3.org/2000/svg",o="http://www.w3.org/1999/xlink",l=Array.isArray,f=e.URL||e.webkitURL;var c=["href","protocol","origin","userInfo","username","password","hostname","port","relative","pathname","directory","file","search","hash"],h=["searchKey","searchList"],u=/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,d=/(?:^|&)([^&=]*)=?([^&]*)/g,g=function(e){var t={toString:p,join:m,update:v},a=u.exec(e||""),i=14;while(i--)t[c[i]]=a[i]||"";var s=t[h[0]]={},r=t[h[1]]={};t[c[12]].replace(d,function(e,t,a){if(t){t=n(t);a=n(a);s[t]=a;(r[t]=r[t]||[]).push(a)}});return t},p=function(e){e=e||this;var t=e[c[1]]||"http",a=e[c[4]],n=e[c[5]],s=e[c[6]],r=e[c[7]],o=e[c[9]],l=e[c[12]],f=e[c[13]],u=e[h[0]],d=e[h[1]],g=s?[t,"://"]:[],p=[],m,v,y,b;if(a){g.push(a);if(n)g.push(":",n);g.push("@")}g.push(s);if(r)g.push(":",r);g.push(o||(s?"/":""));if(l){g.push("?",l)}else{if(u){for(m in u){p.push(i(m)+"="+i(u[m]))}}else if(d){for(m in d){for(y=0,v=d[m],b=v.length;y<b;y++){p.push(i(m)+"="+i(v[y]))}if(!b)p.push(m)}}if(p.length)g.push("?",p.join("&"))}if(f)g.push("#",f);return g.join("")},m=function(e,t){t=t||{};var a=this,n=a[c[9]].split("/"),i=n.length-1,s=g(e),r=s.pathname.split("/"),o=r.length,l,f;if(typeof t.query=="undefined")t.query=true;if(typeof t.hash=="undefined")t.hash=true;for(l=0;l<14;l++){if(l==9){continue}if(l==12&&!t.query){continue}if(l==13&&!t.hash){continue}if(s[c[l]])a[c[l]]=s[c[l]]}if(t.query&&s[c[12]]){a[h[0]]=s[h[0]];a[h[1]]=s[h[1]]}for(l=0;l<o;l++){f=r[l];if(f=="."){n[i]=""}else if(f==".."){n[--i]=""}else if(f===""){if(o>1){if(!l){n[0]=f;i=1}if(l==o-1)n[i]=f}}else{n[i]=f;if(l<o-1)i++}}var u=a[c[9]]=n.slice(0,i+1).join("/"),d=u.split(/\//),p=[u];if(a[c[12]])p.push("?",a[c[12]]);if(a[c[13]])p.push("#",a[c[13]]);a[c[8]]=p.join("");a[c[10]]=d.slice(0,d.length-1).join("/")+"/";a[c[11]]=d[d.length-1];return a},v=function(e){var t=this,a=t[h[0]],n=t[h[1]],s=[],r,o;for(r in e){o=e[r];if(o===null){delete a[r];delete n[r]}else if(l(o)){}else{a[r]=o;n[r]=[o]}}for(r in a){s.push(i(r)+"="+i(a[r]))}t.search=s.join("&");return t};a.csv=function(e,t){t=t||{};var a=t.lineterminator||"\n",n=t.delimiter||",",i=0,s=e.length,r,o,f,c,h,u=[],d={},g=0,p=new RegExp('("|'+n+"|\n)","g");if(!s){}else if(l(e[0])){for(;i<s;i++){f=e[i];o=f.length;for(r=0;r<o;r++){c=String(f[r]).replace(/"/g,'""');if(c.search(p)>=0)c='"'+c+'"';if(r>0)c=n+c;u.push(c)}u.push(a)}}else{for(;i<s;i++){f=e[i];h=[];for(r in f){c=String(f[r]).replace(/"/g,'""');if(c.search(p)>=0)c='"'+c+'"';if(!(r in d))d[r]=g++;h[d[r]]=c}u.push(h.join(n));u.push(a)}h=[];for(r in d){c=String(r).replace(/"/g,'""');if(c.search(p)>=0)c='"'+c+'"';h.push(c)}u.unshift(a);u.unshift(h.join(n))}return u.join("")};function y(e,t){var a=-1,n,i;if(!e.cssRules)return;i=e.cssRules.length;while(++a<i){n=e.cssRules[a];if(n.type==3)y(n.styleSheet,t);else if(n.selectorText&&n.selectorText.indexOf(">")==-1)t.push(n.cssText)}}function b(t,a){var n=e.navigator,i,s;if(n.msSaveOrOpenBlob&&n.msSaveOrOpenBlob.bind(n))return n.msSaveOrOpenBlob(t,a.file);i=f.createObjectURL(t);s=C("<a></a>").attr("download",a.file).attr("href",i).css("display","none").appendTo("body").dispatch("click");setTimeout(function(){s.remove();f.revokeObjectURL(i)},10)}function w(e){if(!e.hasAttributeNS(s,"xmlns"))e.setAttributeNS(s,"xmlns",r);if(!e.hasAttributeNS(s,"xmlns:xlink"))e.setAttributeNS(s,"xmlns:xlink",o);return e}a.download=function(t){var n=t.mime,i=t.source,s=-1,r,o,l,c,h,u,d,g,p,m;if(t.svg){n=n||"application/svg;charset=utf-8";u=w(C(t.svg).get(0));if(!i){i=(new XMLSerializer).serializeToString(u);if(!t.nostyle){r=e.document.styleSheets||[];l=[];o=r.length;s=-1;while(++s<o)if(r[s])y(r[s],l);if(l.length)i=i.replace(/>/,"><defs><style><![CDATA["+l.join("\n")+"]]></style></defs>")}i='<?xml version="1.0" standalone="no"?>'+i}b(new Blob([i],{type:n}),t)}else if(t.png){n=n||"image/png";u=w(C(t.png).get(0));c=new Image;i=(new XMLSerializer).serializeToString(u);h=new Blob([i],{type:"image/svg+xml;charset=utf-8"});d=f.createObjectURL(h);c.onload=function(){g=u.getBoundingClientRect();p=C("<canvas></canvas>").attr("width",t.width||g.width).attr("height",t.height||g.height).appendTo("body").css("display","none").get(0);m=p.getContext("2d");m.drawImage(c,0,0);p.toBlob(function(e){b(e,t);setTimeout(function(){C(p).remove();f.revokeObjectURL(d)},10)},n)};c.src=d}else if(t.csv){n=n||"text/csv;charset-utf-8";i=a.csv(t.csv);b(new Blob([i],{type:n}),t)}else{n=n||"text/html;charset-utf-8";b(new Blob([t.source],{type:n}),t)}};a.zoom=function(e){e=e||{};var t=e.selector,a=d3.select(t),n=d3.selectAll(a.node().children),i=d3.behavior.zoom().on("zoom",function(){n.attr("transform","translate("+d3.event.translate+")scale("+d3.event.scale+")")});if(e.off){a.on(".zoom",null);n.classed("zoom",true).transition().attr("transform","");return}a.call(i).classed("zoom",false)};var C=e.jQuery,x=C,N=function(e,t){return e.filter(t).add(e.find(t))},B=function(e,t){return e.not(t).add(e.not(t))};getSize=function(e){var t=C(e),a=t.css("display"),n={};if(a!="block")t.css("display","block");n.width=t.width();n.height=t.height();if(a!="block")t.css("display",a);return n};if(C){var j=/[\t\r\n\f]/g,z=/\S+/g;C.fn.addClass=function(e){var t,a,n,i,s,r,o,l=0,f=this.length,c=typeof e==="string"&&e;if(x.isFunction(e)){return this.each(function(t){x(this).addClass(e.call(this,t,typeof this.className=="object"?this.className.baseVal:this.className))})}if(c){t=(e||"").match(z)||[];for(;l<f;l++){a=this[l];r=typeof a.className=="object";o=r?a.className.baseVal:a.className;n=a.nodeType===1&&(o?(" "+o+" ").replace(j," "):" ");if(n){s=0;while(i=t[s++]){if(n.indexOf(" "+i+" ")<0){n+=i+" "}}if(r){a.className.baseVal=x.trim(n)}else{a.className=x.trim(n)}}}}return this};C.fn.removeClass=function(e){var t,a,n,i,s,r,o,l=0,f=this.length,c=arguments.length===0||typeof e==="string"&&e;if(x.isFunction(e)){return this.each(function(t){x(this).removeClass(e.call(this,t,typeof this.className=="object"?this.className.baseVal:this.className))})}if(c){t=(e||"").match(z)||[];for(;l<f;l++){a=this[l];r=typeof a.className=="object";o=r?a.className.baseVal:a.className;n=a.nodeType===1&&(o?(" "+o+" ").replace(j," "):"");if(n){s=0;while(i=t[s++]){while(n.indexOf(" "+i+" ")>=0){n=n.replace(" "+i+" "," ")}}if(r){a.className.baseVal=e?x.trim(n):""}else{a.className=e?x.trim(n):""}}}}return this};C.fn.toggleClass=function(e,t){var a=typeof e;if(typeof t==="boolean"&&a==="string"){return t?this.addClass(e):this.removeClass(e)}if(x.isFunction(e)){return this.each(function(a){x(this).toggleClass(e.call(this,a,typeof this.className=="object"?this.className.baseVal:this.className,t),t)})}return this.each(function(){var t,n;if(a==="string"){var i,s=0,r=x(this),o=e.match(z)||[];while(i=o[s++]){if(r.hasClass(i)){r.removeClass(i)}else{r.addClass(i)}}}else if(a===core_strundefined||a==="boolean"){t=typeof this.className=="object";n=t?this.className.baseVal:this.className;if(n){data_priv.set(this,"__className__",n)}if(t){this.className.baseVal=this.className.baseVal||e===false?"":data_priv.get(this,"__className__")||""}else{this.className=this.className||e===false?"":data_priv.get(this,"__className__")||""}}})};C.fn.hasClass=function(e){var t=" "+e+" ",a,n=0,i=this.length;for(;n<i;n++){a=this[n].className;if(this[n].nodeType===1&&(" "+(typeof a=="object"?a.baseVal:a)+" ").replace(j," ").indexOf(t)>=0){return true}}return false};C.fn.aspect=function(e){e=e||{};var t,a=this,n=e.width,i=e.height,s=a[0].ownerDocument,r=C(s.defaultView||s.parentWindow);if(e.off){r.off(".g.aspect");return a}t=function(){(e.selector?N(a,e.selector):a).each(function(){var e=C(this),t=e.data("width")||n,a=e.data("height")||i,s=getSize(this);if(a)e.css("height",Math.ceil(a*s.width));else if(t)e.css("width",Math.ceil(t*s.height))})};r.on("resize.g.aspect",t).on("orientationchange.g.aspect",t);t();return a};var A;try{new Event("click");A=function(e,t){if(e.match(/click$|^mouse|^menu$/))return new MouseEvent(e,t);else if(e.match(/^key/))return new KeyboardEvent(e,t);else if(e.match(/^focus|^blur$/))return new FocusEvent(e,t);else return new Event(e,t)}}catch(k){A=function(e,t){var a=document.createEvent("event");a.initEvent(e,t.bubbles,t.cancelable);return a}}C.fn.dispatch=function(e,t){return this.each(function(){this.dispatchEvent(A(e,C.extend({bubbles:true,cancelable:true},t)))})};C.fn.urlfilter=function(e){e=e||{};var t=this,n=e.attr||"href",i=e.selector||"["+n+"]",s="remove"in e?e.remove:true,r=t[0].ownerDocument,o=(r.defaultView||r.parentWindow).location,l=e.target;if(e.off)return t.off("click.urlfilter");return t.on("click.urlfilter",i,function(e){e.preventDefault();var t=C(this),i=t.data("target")||l,r=t.attr(n),f=a.url.parse(r)[h[0]],c,u,d;if(s)for(d in f)if(f[d]==="")f[d]=null;if(!i)u=o.href;else if(i=="#")u=o.hash.replace(/^#/,"");else{c=C(i);u=c.data("src")}u=a.url.parse(u).join(r,{query:false,hash:false}).update(f);if(!i)o.href=u;else if(i=="#")o.hash=u;else c.data("src",u).load(u.toString())})};C.fn.highlight=function(e){e=e||{};var t=this,a=e.attr||"data-highlight",n=e.selector||"["+a+"]",i=e.leaveDelay||30,s=e.toggle,r,o=[];if(e.off)return t.off(".g.highlight");function l(i,s){var r=C(s),o=C(r.data("target")||e.target||n),l=r.data("hide-class")||e.hideClass||"fade",f=r.data("show-class")||e.showClass||"",c=C(),h,u=i.length,d=u;if(u){while(d--)c=c.add(N(o,C(i[d]).attr(a)));h=o.not(c);if(f){B(c,"."+f).addClass(f);N(h,"."+f).removeClass(f)}if(l){N(c,"."+l).removeClass(l);B(h,"."+l).addClass(l)}}else{if(f)N(o,"."+f).removeClass(f);if(l)N(o,"."+l).removeClass(l)}t.trigger({type:"shown.g.highlight",selected:C(i),matches:(u?c:o).length})}t.on("mouseenter.g.highlight",n,function(e){if(r)r=clearTimeout(r);if(!o.length)l([e.target],this)}).on("mouseleave.g.highlight",n,function(e){if(r)r=clearTimeout(r);var t=this;if(!o.length)r=setTimeout(function(){l([],t)},i)}).on("click.g.highlight",n,function(e){var t=C(this),a;if(t.data("toggle")||s){a=o.indexOf(e.target);if(a>=0){o.splice(a,1);t.removeClass("active")}else{o.push(e.target);t.addClass("active")}l(o,this)}});return t};C.fn.panzoom=function(t){t=t||{};var a=this,n=t.attr||"data-zoom",i=t.selector||"["+n+"]",s=t.target,r=t.zoom||4,o="viewBox",l="animated";if(t.off)return a.off("click.panzoom");a.on("click",i,function(t){var a=C(this),i=a.data("target")||s,f=a.attr(n)||r,c=C(i);function h(t){c.each(function(){var t=C(this).data(o);if(e.d3)d3.select(this).transition().duration(100).attr(o,t);else this.setAttribute(o,t)})}function u(t){c.each(function(){var a=C(this),n=a.data(o),i=this.getBoundingClientRect(),s=+n[2]||i.width,r=+n[3]||i.height,c=a.offset(),h=t.pageX-c.left,u=t.pageY-c.top,d=[h,u,s/f,r/f].join(" ");if(e.d3&&!t.type.match(/move/)){a.data(l,true);d3.select(this).transition().duration(100).attr(o,d).each("end",function(){a.data(l,false)})}else if(!a.data(l)){this.setAttribute(o,d)}})}if(a.is(".active")){h();c.off(".panzoom").each(function(){C(this).removeData(o)})}else{c.each(function(){C(this).data(o,(this.getAttribute(o)||"").split(/,|\s+/))}).on("mousemove.panzoom",u);u(t)}a.toggleClass("active")});return a};C.fn.reveal=function(e){e=e||{};var t=this,a=e.attr||"data-reveal",n=e.selector||"["+a+"]",i={};if(e.off)return t.off(".g.reveal");C(n).each(function(){var t=C(this),a=t.data("target")||e.target||n,s,r,o,l,f;if(!i[a]){s=+(t.data("start")||e.start||0);l=t.data("hide-class")||e.hideClass||"fade";o=t.data("type")||e.type||"overlay";f="."+l;r=C(a);if(o=="overlay"){r.eq(s).filter(f).removeClass(l);r.slice(s+1).not(f).addClass(l)}else if(o=="single"){r.eq(s).filter(f).removeClass(l);r.not(r.eq(s)).not(f).addClass(l)}i[a]=1}});return t.on("click.g.reveal",n,function(t){var i=C(this),s=C(i.data("target")||e.target||n),r=i.data("hide-class")||e.hideClass||"fade",o=i.data("type")||e.type||"overlay",l=i.data("loop")||e.loop,f="."+r,c=i.attr(a),h,u,d,g,p;if(o=="overlay"){if(c.match(/next/i)){h=s.filter(f);if(!h.length){if(l){s.slice(1).addClass(r);d=s.eq(0)}else{d=s.last()}}else{d=h.first().removeClass(r)}g=s.index(d)}else if(c.match(/prev/i)){u=s.not(f);if(u.length<=1){if(l){s.removeClass(r);d=s.last()}}else{u.last().addClass(r);d=u.eq(-2)}g=s.index(d)}else{g=+c;if(g<0)g=s.length+g;s.slice(0,g+1).filter(f).removeClass(r);s.slice(g+1).not(f).addClass(r)}}else if(o=="single"){p=s.length;u=s.not(f);if(c.match(/next/i)){if(u.length){g=s.index(u.last())+1;if(g>=p)g=l?0:p-1}else g=0}else if(c.match(/prev/i)){if(u.length){g=s.index(u.last())-1;if(g<0)g=l?p-1:0}else g=p-1}else g=+c;d=s.eq(g);d.filter(f).removeClass(r);s.not(d).not(f).addClass(r)}i.trigger({type:"shown.g.reveal",slide:g})})};var S=function(e){return(e||"").toLowerCase().replace(/\s+/g," ").replace(/^ /,"").replace(/ $/,"")};C.fn.search=function(e){e=e||{};var t=this,a=e.attr||"data-search",n=e.selector||"["+a+"]",i=e.transform||S,s=e.showClass||"",r=e.hideClass||"",o="search-lastsearch",l="search-mapping",f,c;if(e.off)return t.off(".g.search");f=function(t){var n=C(t.target),s=[],r=e.text||n.attr(a),o=C(n.data("target")||e.target||(typeof r=="string"?"["+r+"]":"*"));o.each(typeof r=="function"?function(){var e=r(this);s.push([C(this),e,i(e),false])}:r=="@text"?function(){var e=this.textContent;s.push([C(this),e,i(e),false])}:function(){var e=this.getAttribute(r);s.push([C(this),e,i(e),false])});n.data(l,s);return s};c=function(e){var t=C(e.target),a=t.val(),n=i(a),c=t.data(o);if(c==n)return;var h=t.data(l),u=new RegExp(n),d=t.data("show-class")||s,g=t.data("hide-class")||r||(d?"":"fade"),p,m,v;t.data(o,n);if(!h)h=f(e);v=h.length;if(!n.length){for(p=0;m=h[p];p++){if(m[3]){if(g)m[0].removeClass(g)}else{if(d)m[0].removeClass(d)}m[3]=false}}else{for(p=0;m=h[p];p++){var y=!m[2].match(u);if(y!==m[3]||!c){if(g)m[0][y?"addClass":"removeClass"](g);if(d)m[0][!y?"addClass":"removeClass"](d);m[3]=y}if(y)v--}}t.trigger({type:"shown.g.search",searchText:a,search:n,matches:v})};return t.on("keyup.g.search",n,c).on("change.g.search",n,c).on("refresh.g.search",f)}}a.unpack=function(){var e,t,a;function n(n){var i=n.data(),s=-1,r=i.length;while(++s<r){i[s].x0=i[s].x;i[s].y0=i[s].y}function o(e){return function(t){t.x+=(t.x0-t.x)*e;t.y+=(t.y0-t.y)*e}}function l(e){var t=d3.geom.quadtree(i);return function(a){var n=a.r,i=a.x-n,s=a.x+n,r=a.y-n,o=a.y+n;t.visit(function(t,l,f,c,h){if(t.point&&t.point!==a){var u=a.x-t.point.x,d=a.y-t.point.y,g=u*u+d*d,p=n+t.point.r;if(g<p*p){g=((g=Math.sqrt(g))-p)/g*e;a.x-=u*=g;a.y-=d*=g;t.point.x+=u;t.point.y+=d}}return l>s||c<i||f>o||h<r})}}e.size([t,a]).nodes(i).on("tick",function f(e){n.each(o(e.alpha*.1)).each(l(.5)).attr("transform",function(e){return"translate("+e.x+","+e.y+")"})}).start()}n.width=function(e){if(!arguments.length)return t;t=e;return n};n.height=function(e){if(!arguments.length)return a;a=e;return n};n.force=function(t){if(!arguments.length)return e;e=t;return n};return n.force(d3.layout.force().charge(0).gravity(.01))};a.map=function(){var e,t,n,i,s,r,o=function(e,t){return 5},l={};function f(){i.scale(1).translate([0,0]);var a=s.bounds(e),r=.95/Math.max((a[1][0]-a[0][0])/t,(a[1][1]-a[0][1])/n),o=[(t-r*(a[1][0]+a[0][0]))/2,(n-r*(a[1][1]+a[0][1]))/2];i.scale(r).translate(o)}l.map=function(t){f();var a=t.selectAll("path.map").data(e.features);a.transition().attr("transform",null).attr("d",s);a.enter().append("path").attr("class","map").attr("transform",null).attr("d",s);a.exit().remove();return a};l.dorling=function(i){f();var l=function(e,t){var a=o(e,t);return"M0,0m-{r},0a{r},{r} 0 1,0 {d},0a{r},{r} 0 1,0 -{d},0".replace(/\{r\}/g,a).replace(/\{d\}/g,2*a)},c=e.features.map(function(e,t){var a=s.centroid(e.geometry);return typeof a==="undefined"?{x:0,y:0}:{x:a[0],y:a[1],r:o(e,t),properties:e.properties}}),h=i.selectAll("path.map").data(c);h.attr("d",l).attr("transform",function(e,t){return"scale("+o(e,t)+")"});h.enter().append("path").attr("class","map").attr("transform",function(e,t){return"scale("+o(e,t)+")"}).attr("d",l);h.exit().remove();if(!r){r=a.unpack().width(t).height(n)}r(h);return h};l.shape=function(t){if(!arguments.length)return e;e=t;return l};l.width=function(e){if(!arguments.length)return t;t=e;return l};l.height=function(e){if(!arguments.length)return n;n=e;return l};l.force=function(e){if(!arguments.length)return force;force=e;return l};l.size=function(e){if(!arguments.length)return o;o=e;return l};l.path=function(e){if(!arguments.length)return s;s=e;return l};l.projection=function(e){if(!arguments.length)return i;i=e;s=d3.geo.path().projection(e);return l};return l.projection(d3.geo.mercator()).force(d3.layout.force().charge(0).gravity(.01))};a.url={parse:g,unparse:p}})(this);